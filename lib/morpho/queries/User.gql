query UserPositions($address: String!) {
  userByAddress(address: $address) {
    address
    marketPositions {
      market {
        ...MarketCore
      }

      borrowAssets
      borrowShares
      borrowAssetsUsd
      collateral
      collateralUsd
      healthFactor
    }
  }
}

fragment MarketCore on Market {
  uniqueKey
  loanAsset {
    id
    address
    decimals
    name
    symbol
  }
  collateralAsset {
    id
    address
    decimals
    name
    symbol
  }
  state {
    utilization
    borrowApy
    netBorrowApy
  }
}
